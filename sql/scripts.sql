SELECT * FROM ApiResources;

SELECT * FROM ApiScopes;

SELECT * FROM Clients;

SELECT * FROM ClientScopes;

SELECT * FROM ClientSecrets;

-- CREATE DATABASE Measure;

USE Measure;

CREATE TABLE Measure.dbo.Units (
    Id uniqueidentifier NOT NULL,
    Display varchar(100) NOT NULL,
    Name varchar(100) NOT NULL,
    CONSTRAINT Units_PK PRIMARY KEY (Id)
);

CREATE TABLE Measure.dbo.Locations (
    Id uniqueidentifier NOT NULL,
    Display varchar(50) NOT NULL,
    Description varchar(250) NOT NULL,
    Longitude float NULL,
    Latitude float NULL,
    Floor int NULL,
    Created datetimeoffset NOT NULL,
    CONSTRAINT Locations_PK PRIMARY KEY (Id)
);

CREATE TABLE Measure.dbo.MeasurePoints (
    Id uniqueidentifier NOT NULL,
    Display varchar(100) NOT NULL,
    Max float DEFAULT 0 NOT NULL,
    Min float DEFAULT 0 NOT NULL,
    Unit uniqueidentifier NOT NULL,
    CONSTRAINT MeasurePoints_PK PRIMARY KEY (Id),
    CONSTRAINT MeasurePoints_Units_FK FOREIGN KEY (Unit) REFERENCES Measure.dbo.Units(Id) ON DELETE CASCADE ON UPDATE CASCADE
);

ALTER TABLE Measure.dbo.MeasurePoints ADD Location uniqueidentifier NULL;
ALTER TABLE Measure.dbo.MeasurePoints ADD CONSTRAINT MeasurePoints_Locations_FK FOREIGN KEY (Location) REFERENCES Measure.dbo.Locations(Id);

CREATE TABLE Measure.dbo.MeasureValues (
    Id uniqueidentifier NOT NULL,
    [Timestamp] datetimeoffset NOT NULL,
    Value float NOT NULL,
    Point uniqueidentifier NOT NULL,
    CONSTRAINT MeasureValues_PK PRIMARY KEY (Id),
    CONSTRAINT MeasureValues_MeasurePoints_FK FOREIGN KEY (Point) REFERENCES Measure.dbo.MeasurePoints(Id) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE INDEX MeasureValues_Timestamp_IDX ON Measure.dbo.MeasureValues ([Timestamp]);


INSERT INTO Measure.dbo.Locations (Id,Display,Description,Longitude,Latitude,Floor,Created) VALUES 
('08932E10-CC40-4169-ABB9-134374970031','Keller','Scheiblerstr. 111',6.602869,51.349884,-1,'2019-03-18 11:05:33.0289319 +00:00')
,('0AD9B7A6-F1C5-46FB-844D-257E6B587106','Schlafzimmer','Scheiblerstr. 111',6.602869,51.349884,0,'2019-03-18 11:01:35.6413772 +00:00')
,('CBED0495-14CF-4192-962F-2D05ED82059F','Kinderzimmer','Scheiblerstr. 111',6.602869,51.349884,0,'2019-03-18 11:03:01.5075183 +00:00')
,('0A39EABC-ED42-48C6-9938-5F0B8855FE88','Büro','Scheiblerstr. 111',6.602869,51.349884,0,'2019-03-18 11:02:14.9780628 +00:00')
,('DF8A8841-C8E1-438C-982C-77D141EF1D80','Wohnzimmer','Scheiblerstr. 111',6.602869,51.349884,0,'2019-03-18 11:01:23.1971835 +00:00')
,('7D3AB857-59BC-48E6-8019-7B1D5BA29F41','Terrasse','Terrasse im Garten',6.602869,51.349884,0,'2019-03-18 09:17:19.2072878 +00:00')
,('0AF80ED8-BB47-4E78-8D8A-803048253ED0','Bad','Scheiblerstr. 111',6.602869,51.349884,0,'2019-03-18 11:01:59.3637256 +00:00')
,('4641CBEC-CB2D-49FF-A405-AD8B7EA51F5B','Küche','Scheiblerstr. 111',6.602869,51.349884,0,'2019-03-18 11:02:07.2575648 +00:00')
,('4E98B6BD-D69A-4982-A8CC-D90011F1C898','Gäste WC','Scheiblerstr. 111',6.602869,51.349884,0,'2019-03-18 11:01:51.7184712 +00:00')
;

INSERT INTO Measure.dbo.Units (Id,Display,Name) VALUES 
('8CFF8D7B-00DB-42B2-B78D-057DAB5B5695','Signal','')
,('1B475C7F-CD64-4B0B-98F4-0DE5038936A4','NEQ1297587:1:BRIGHTNESS','')
,('86B0DC19-1CA5-41D7-BAF6-30B4B21D7931','Wert','')
,('FADBA535-E440-4F6C-BED6-6FEDA0C7FAD1','Spannung','V')
,('4E618495-240D-41F3-8B1A-736E1B48CEB8','Anzahl','Stück')
,('02A96032-2C2E-4B05-BE17-83A9D03250F4','Feinstaub PM10','µg/m³')
,('D079A693-4835-4BC1-BD6B-879485EB2174','Samples','')
,('1BF8EF7B-EA04-403F-A67B-88B472C10145','Feinstaub PM2.5','µg/m³')
,('934CE8D3-0DB9-4279-92BE-91997C49BBD8','Temperatur','°C')
,('6A13BD82-9B1D-4E22-B836-9A701C6D648D','MinMicro','')
;
INSERT INTO Measure.dbo.Units (Id,Display,Name) VALUES 
('4A9CB404-1193-45BC-8C52-AFC708EA2F9B','MaxMicro','')
,('52356656-C6A0-4C06-A585-BA8C0E97750E','Leistung','W')
,('574EFEB5-A708-46CD-A33F-C1CC6655DB55','Zustand','an/aus')
,('FC36426D-05AD-4837-BF78-C415D0705442','Öffnung','%')
,('3AF35BE7-5270-49E8-B8E9-C714FFB92307','Luftfeuchte','%')
,('DB5F325C-FE3C-4EBD-98E5-D55AD29E411F','Luftdruck','hPa')
;

INSERT INTO Measure.dbo.MeasurePoints (Id,Display,Max,Min,Unit,Location) VALUES 
('E964AC14-ECE9-40AF-8F9D-03D4C841ABDA','Fenster links',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','DF8A8841-C8E1-438C-982C-77D141EF1D80')
,('8672AEF3-A80C-41E1-987C-0FB03419BB2E','Ventil',0,0,'FC36426D-05AD-4837-BF78-C415D0705442','DF8A8841-C8E1-438C-982C-77D141EF1D80')
,('31B6FD9A-EBC3-456A-9CCF-1FBB2FEBA980','Bewegung',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('8FA026A5-BA9F-476A-AB7F-27406C3CEA91','BMP180',0,0,'934CE8D3-0DB9-4279-92BE-91997C49BBD8','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('21D1E5C7-33CB-4824-BDDA-2B55E4CEF801','Fenster rechts',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','CBED0495-14CF-4192-962F-2D05ED82059F')
,('795F28B0-77ED-4A57-AF57-32A2C47CDBA0','DHT22',0,0,'3AF35BE7-5270-49E8-B8E9-C714FFB92307','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('91D88EFE-9D50-44E3-82BC-353513857DC9','Türe rechts',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','DF8A8841-C8E1-438C-982C-77D141EF1D80')
,('50BB6D22-CAE0-4767-B129-37449AC53A67','Fenster rechts',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','DF8A8841-C8E1-438C-982C-77D141EF1D80')
,('EC80C083-7A60-40D3-9AF5-4775AE0CBEFD','Ventil',0,0,'934CE8D3-0DB9-4279-92BE-91997C49BBD8','DF8A8841-C8E1-438C-982C-77D141EF1D80')
,('C912D681-25F6-4562-BC3D-54A9FA04E5E5','Fenster links',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','0AD9B7A6-F1C5-46FB-844D-257E6B587106')
;
INSERT INTO Measure.dbo.MeasurePoints (Id,Display,Max,Min,Unit,Location) VALUES 
('777CECC4-C140-477D-BD94-5A0A611F47FC','SDS011',0,0,'02A96032-2C2E-4B05-BE17-83A9D03250F4','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('C928D913-67CD-47C6-8C09-5D8B17531D79','Temperatur',100,0,'934CE8D3-0DB9-4279-92BE-91997C49BBD8','DF8A8841-C8E1-438C-982C-77D141EF1D80')
,('516C6AB3-E615-462E-8718-63FD85220D6A','BMP180',0,0,'DB5F325C-FE3C-4EBD-98E5-D55AD29E411F','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('78E8A6CB-FFB1-41E7-A5CA-65C9C5F06983','Türe links',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','DF8A8841-C8E1-438C-982C-77D141EF1D80')
,('9AF4EED9-8E8D-4AFA-A015-6A2CCB4673A3','Fenster',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','0AF80ED8-BB47-4E78-8D8A-803048253ED0')
,('FB43A587-8251-4EA1-97B2-6F2F702952A6','SDS011',0,0,'1BF8EF7B-EA04-403F-A67B-88B472C10145','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('B0F96C9C-F6FD-44C6-8AF0-7FB79804BD04','Fenster links',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','CBED0495-14CF-4192-962F-2D05ED82059F')
,('38F5700F-1DFC-483E-8320-8F44BE26B251','Helligkeit',255,0,'86B0DC19-1CA5-41D7-BAF6-30B4B21D7931','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('6ECB2AFB-95E0-4E86-911C-9628F453CCA7','Luftfeuchte',100,0,'3AF35BE7-5270-49E8-B8E9-C714FFB92307','DF8A8841-C8E1-438C-982C-77D141EF1D80')
,('8F6648C0-2774-4F27-AD7E-96777555EACC','Stromzähler TV',0,0,'52356656-C6A0-4C06-A585-BA8C0E97750E','DF8A8841-C8E1-438C-982C-77D141EF1D80')
;
INSERT INTO Measure.dbo.MeasurePoints (Id,Display,Max,Min,Unit,Location) VALUES 
('A862865D-CA15-4EFD-B208-9A5D3B6C1C9B','WiFi',0,0,'4A9CB404-1193-45BC-8C52-AFC708EA2F9B','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('BEB93B25-212D-4AD1-8BE8-ACBD8B8894C9','Fenster rechts',1,0,'574EFEB5-A708-46CD-A33F-C1CC6655DB55','0AD9B7A6-F1C5-46FB-844D-257E6B587106')
,('CCC55F5C-C2DF-4D39-B5D0-C7EE050A1113','WiFi',0,0,'D079A693-4835-4BC1-BD6B-879485EB2174','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('B30221EE-6C56-4BD9-A9EC-D412C982D867','Stromzähler',0,0,'52356656-C6A0-4C06-A585-BA8C0E97750E','08932E10-CC40-4169-ABB9-134374970031')
,('84E2803E-5C95-4126-999E-D508CD41A47B','WiFi',0,0,'8CFF8D7B-00DB-42B2-B78D-057DAB5B5695','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('A04C9CF8-07CA-42C5-A9A6-DC6D7004F8F1','Ventil Bad',100,0,'FC36426D-05AD-4837-BF78-C415D0705442','0AF80ED8-BB47-4E78-8D8A-803048253ED0')
,('C70334D8-6C77-46EB-9384-E7A51BAEF17B','WiFi',0,0,'6A13BD82-9B1D-4E22-B836-9A701C6D648D','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('6E78294C-0AB6-4E71-A790-EA099D0693A6','DHT22',0,0,'934CE8D3-0DB9-4279-92BE-91997C49BBD8','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('F6CF4A57-300E-4ED8-AF71-EF834DE2D111','WiFi',0,0,'D079A693-4835-4BC1-BD6B-879485EB2174','7D3AB857-59BC-48E6-8019-7B1D5BA29F41')
,('EB32A844-BD21-498E-8E50-F7EE9DE9C024','Ventil Bad',0,0,'934CE8D3-0DB9-4279-92BE-91997C49BBD8','0AF80ED8-BB47-4E78-8D8A-803048253ED0')
;
